(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ae99"],{be11:function(e,t,n){"use strict";n.r(t);var c=n("5530"),r=(n("d81d"),n("b0c0"),n("4d90"),n("caad"),n("2532"),n("7a23")),a={class:"text-muted me-3"},i={class:"me-3"};function o(e,t,n,o,u,s){var d,l=Object(r["B"])("HorizontalNav"),b=Object(r["B"])("LikedIcon"),f=Object(r["B"])("HaveLikedIcon"),j=Object(r["B"])("DownloadMusicIcon"),O=Object(r["B"])("musicList"),p=Object(r["B"])("CommonToast");return Object(r["t"])(),Object(r["f"])(r["a"],null,[Object(r["i"])(l,{navs:e.navs},null,8,["navs"]),Object(r["i"])(O,{columns:e.columns,dataSource:null===(d=e.dataSource)||void 0===d?void 0:d.map((function(e,t){return Object(c["a"])(Object(c["a"])({},e),{},{index:t})})),emptyText:"暂无搜索结果，搜搜其他关键词吧~"},{toolBar:Object(r["N"])((function(t){var n=t.id,c=t.index,o=t.name;return[Object(r["i"])("span",a,Object(r["E"])(String(c+1).padStart(2,"0")),1),Object(r["i"])("span",i,[e.likedMusicList.includes(n)?(Object(r["t"])(),Object(r["f"])(f,{key:1,class:"cursor-pointer",onClick:function(t){return e.collectMusic(!1,n)},width:"15",height:"15"},null,8,["onClick"])):(Object(r["t"])(),Object(r["f"])(b,{key:0,class:"cursor-pointer",onClick:function(t){return e.collectMusic(!0,n)},width:"15",height:"15"},null,8,["onClick"]))]),Object(r["i"])(j,{onClick:function(t){return e.handleDownloadMusic({id:n,name:o})},class:"cursor-pointer",width:"15",height:"15"},null,8,["onClick"])]})),_:1},8,["columns","dataSource"]),Object(r["i"])(p,{ref:"toastRef"},null,512)],64)}var u=n("1da1"),s=(n("96cf"),n("a15b"),n("b137")),d=n("6c02"),l=n("5502"),b=n("c926"),f=n("87db"),j=n("54ba"),O=n("3c08"),p=n("6e21"),m=Object(r["j"])({components:{MusicList:b["default"]},setup:function(){var e=Object(d["c"])(),t=Object(l["b"])(),n=Object(r["x"])({navs:[{title:"单曲",active:!0}],keywords:Object(r["d"])((function(){return e.query.keyword})),songs:[],columns:[{title:"",span:1,dataIndex:"toolBar",slots:{customRender:"toolBar"}},{title:"音乐标题",dataIndex:"name",span:3,slots:{customRender:"name"}},{title:"歌手",dataIndex:"ar",span:3,render:function(e){return e.map((function(e){return e.name})).join("、")}},{title:"专辑",dataIndex:"al",span:2,render:function(e){return e.name}},{title:"时长",dataIndex:"dt",span:1,render:function(e){return Object(f["g"])(e)}}],dataSource:[],likedMusicList:Object(r["d"])((function(){return t.state.likedMusicList})),toastRef:Object(r["y"])(null)});Object(r["L"])((function(){return n.keywords}),function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(c){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}return Object(s["a"])({keywords:c,type:1}).then(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200!==t.code){e.next=4;break}return e.next=3,Object(f["b"])(t.result.songs||[]);case 3:n.dataSource=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,t.dispatch("getLikedMusicList");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{immediate:!0});var a=function(e,c){Object(j["g"])({id:c,like:e}).then(function(){var c=Object(u["a"])(regeneratorRuntime.mark((function c(r){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(200!==r.code){c.next=6;break}return c.next=3,t.dispatch("getLikedMusicList");case 3:n.toastRef.success(e?"已添加到我喜欢的音乐":"取消喜欢成功"),c.next=7;break;case 6:n.toastRef.error(e?"添加失败":"取消喜欢失败");case 7:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()).catch((function(e){n.toastRef.error("请求失败")}))},i=function(e){var t=e.id,c=e.name;Object(p["c"])({id:t}).then((function(e){if(200===e.code){var t=e.data;t&&t.length?Object(O["b"])(t[0].url,c).then((function(){n.toastRef.success("已添加至下载")})).catch((function(){n.toastRef.warn("下载失败")})):n.toastRef.warn("获取音乐链接失败")}}))};return Object(c["a"])(Object(c["a"])({},Object(r["F"])(n)),{},{collectMusic:a,handleDownloadMusic:i})}});m.render=o;t["default"]=m}}]);
//# sourceMappingURL=chunk-2d21ae99.31e0c4dc.js.map