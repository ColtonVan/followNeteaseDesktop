{"version":3,"sources":["webpack:///./src/views/dailyRec.vue?3546","webpack:///./src/views/dailyRec.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/utils/file.ts","webpack:///./src/views/dailyRec.vue?b01e","webpack:///./src/views/dailyRec.vue?0700","webpack:///./node_modules/core-js/modules/es.array.join.js"],"names":["class","width","height","color","calendarColor","window","Date","getDate","colVisible","dailySongs","dailySong","dailySongIndex","key","String","padStart","likeList","includes","id","collectMusic","tryDownloadMusic","name","ar","map","item","join","al","playTime","dt","visible","downloadModalVisible","default","songsUrlObjArr","index","type","level","checked","for","musicQuality","buttons","confirmDownload","ref","tracks","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","downloadMusic","url","now","console","log","tagA","document","createElement","download","href","click","setup","store","state","currentMusicObj","commonToast","newV","getRec","Promise","resolve","reject","t","then","res","code","data","getLikeList","ids","getters","getTheme","findResult","find","like","all","res1","res2","success","render","__scopeId","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","STRICT_METHOD","target","proto","forced","separator","call","this"],"mappings":"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","file":"js/chunk-17af3c93.0a32170d.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./dailyRec.vue?vue&type=style&index=0&id=1c5cbfb4&scoped=true&lang=scss\"","<template>\r\n    <div class=\"dailyRec ps-3 h-100 overflow-scroll hideScrollBar\">\r\n        <div class=\"m-5 d-flex\">\r\n            <div class=\"position-relative calendarBox\">\r\n                <CalendarIcon width=\"90\" height=\"90\" :color=\"calendarColor\" />\r\n                <div class=\"dateText fw-bold position-absolute start-50 fs-1 translate-middle\">{{ new window.Date().getDate() }}</div>\r\n            </div>\r\n            <div class=\"ms-5 d-flex flex-column justify-content-center\">\r\n                <div class=\"fs-1\">每日歌曲推荐</div>\r\n                <div class=\"text-muted\">根据你的音乐口味生成，每天6:00更新</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"d-flex\">\r\n            <div\r\n                class=\"rounded-pill d-flex align-items-center justify-content-between text-white mb-4 ms-5 cursor-pointer position-relative overflow-hidden playAllBtn\"\r\n            >\r\n                <div class=\"d-flex align-items-center justify-content-center border-end h-100 hover-btn\">\r\n                    <DownArrowIcon width=\"20\" height=\"20\" />\r\n                    <span class=\"ms-1\">播放全部</span>\r\n                </div>\r\n                <div class=\"d-flex align-items-center justify-content-center flex-grow-1 h-100 hover-btn\">\r\n                    <PlusIcon width=\"20\" height=\"20\" />\r\n                </div>\r\n            </div>\r\n            <div @click=\"colVisible = true\" class=\"collectList ms-3 rounded-pill px-5 border d-flex align-items-center cursor-pointer hover-btn\">\r\n                <CollectList width=\"20\" height=\"20\" />\r\n                <span class=\"ms-2\">收藏全部</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"border-top mb-5\">\r\n            <div class=\"row songRow headRow w-100\">\r\n                <div class=\"col-6 p-3 text-black-50 fs-5 songCol\">音乐标题</div>\r\n                <div class=\"col p-3 text-black-50 fs-5 songCol\">歌手</div>\r\n                <div class=\"col p-3 text-black-50 fs-5 songCol\">专辑</div>\r\n                <div class=\"col p-3 text-black-50 fs-5 songCol\">时长</div>\r\n            </div>\r\n            <div class=\"row ps-5 songRow w-100\" v-for=\"(dailySong, dailySongIndex) in dailySongs\" :key=\"dailySongIndex\">\r\n                <div class=\"col-6 p-3 songCol\">\r\n                    <span class=\"text-black-50 me-4\">{{ String(dailySongIndex + 1).padStart(2, \"0\") }}</span>\r\n                    <HaveLikedIcon\r\n                        @click=\"collectMusic(dailySong, false)\"\r\n                        v-if=\"likeList.includes(dailySong.id)\"\r\n                        width=\"14\"\r\n                        height=\"14\"\r\n                        class=\"hover-likedIcon\"\r\n                    />\r\n                    <LikedIcon @click=\"collectMusic(dailySong, true)\" v-else width=\"14\" height=\"14\" class=\"hover-icon\" />\r\n                    <DownloadMusicIcon @click=\"tryDownloadMusic(dailySong)\" width=\"14\" height=\"14\" class=\"hover-icon ms-4\" />\r\n                    <span class=\"ms-4\">{{ dailySong.name }}</span>\r\n                </div>\r\n                <div class=\"col-2 p-3 songCol\">{{ dailySong.ar.map(item => item.name).join(\"、\") }}</div>\r\n                <div class=\"col-2 p-3 songCol\">{{ dailySong.al.name }}</div>\r\n                <div class=\"col-2 p-3 songCol\">{{ playTime(dailySong.dt) }}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <CommonModal v-model:visible=\"downloadModalVisible\">\r\n        <template #default>\r\n            <div class=\"d-flex justify-content-center\">\r\n                <div v-for=\"(item, index) in songsUrlObjArr\" :key=\"index\" class=\"d-flex align-items-center cursor-pointer\">\r\n                    <input type=\"radio\" :name=\"item.level\" :id=\"item.level\" v-model=\"item.checked\" :checked=\"item.checked\" />\r\n                    <label class=\"ms-3\" :for=\"item.level\">{{ musicQuality(item.level) }}</label>\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template #buttons>\r\n            <div class=\"d-flex justify-content-center\">\r\n                <div @click=\"confirmDownload\" class=\"okBtn cursor-pointer d-flex justify-content-center align-items-center\">\r\n                    确定\r\n                </div>\r\n                <div\r\n                    @click=\"downloadModalVisible = false\"\r\n                    class=\"okBtn cancelBtn ms-4 rounded-pill text-muted border cursor-pointer d-flex justify-content-center align-items-center\"\r\n                >\r\n                    取消\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </CommonModal>\r\n    <CommonToast ref=\"commonToast\" />\r\n    <CollectionListModal :tracks=\"dailySongs.map(item => item.id)\" v-model:visible=\"colVisible\" />\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, reactive, ref, toRefs, watch } from \"vue\";\r\nimport { getRecommendSongsApi, getSongDetail, getSongUrl, likeMusic } from \"@/api/discover\";\r\nimport { getLikeList as getLikeListApi } from \"@/api/login\";\r\nimport { playTime } from \"@/hooks/useFilters\";\r\nimport { useStore } from \"vuex\";\r\nimport { downloadMusic as downloadMusicFun } from \"@/utils/file\";\r\nimport { musicQuality } from \"@/hooks/useFilters\";\r\nimport { AxiosResponseProps } from \"@/utils/request\";\r\nexport default defineComponent({\r\n    setup() {\r\n        const store = useStore();\r\n        const state = reactive({\r\n            dailySongs: [],\r\n            downloadModalVisible: false,\r\n            songsUrlObjArr: [],\r\n            currentMusicObj: {},\r\n            likeList: [],\r\n            commonToast: ref(null),\r\n            colVisible: false,\r\n        });\r\n        watch(\r\n            () => state.songsUrlObjArr,\r\n            newV => {\r\n                console.log(newV);\r\n            }\r\n        );\r\n        const getRec = () => {\r\n            return new Promise((resolve, reject) => {\r\n                getRecommendSongsApi({ t: Date.now() }).then((res: AxiosResponseProps) => {\r\n                    if (res.code === 200) {\r\n                        state.dailySongs = res.data.dailySongs;\r\n                        resolve(res);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        getRec();\r\n        const getLikeList: () => Promise<AxiosResponseProps> = () => {\r\n            return new Promise((resolve, reject) => {\r\n                getLikeListApi().then((res: any) => {\r\n                    if (res.code === 200) {\r\n                        state.likeList = res.ids;\r\n                        resolve(res);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        getLikeList();\r\n        const calendarColor = computed(() =>\r\n            store.getters.getTheme === \"primaryTheme\" ? \"#ec4141\" : store.getters.getTheme === \"darkTheme\" ? \"#212529\" : \"#50c475\"\r\n        );\r\n        const tryDownloadMusic = item => {\r\n            state.currentMusicObj = item;\r\n            getSongUrl(item.id).then((res: AxiosResponseProps) => {\r\n                if (res.code === 200) {\r\n                    if (res.data.length === 1) {\r\n                        state.songsUrlObjArr = res.data.map(item => ({ ...item, checked: true }));\r\n                    } else {\r\n                        state.songsUrlObjArr = res.data.map(item => ({ ...item, checked: false }));\r\n                    }\r\n                    state.downloadModalVisible = true;\r\n                }\r\n            });\r\n        };\r\n        const confirmDownload = () => {\r\n            console.log(state.songsUrlObjArr);\r\n            let findResult = state.songsUrlObjArr.find(item => item.checked);\r\n            if (findResult) {\r\n                downloadMusicFun(findResult.url, (state.currentMusicObj as { name: string }).name);\r\n            }\r\n        };\r\n        const collectMusic = (item, like) => {\r\n            likeMusic({ id: item.id, like }).then((res: any) => {\r\n                if (res.code === 200) {\r\n                    Promise.all([getRec(), getLikeList()]).then(([res1, res2]: [AxiosResponseProps, AxiosResponseProps]) => {\r\n                        if (res1.code === 200 && res2.code === 200) {\r\n                            state.commonToast.success(like ? \"已添加到我喜欢的音乐\" : \"取消喜欢成功\");\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        return {\r\n            ...toRefs(state),\r\n            playTime,\r\n            calendarColor,\r\n            window,\r\n            tryDownloadMusic,\r\n            musicQuality,\r\n            confirmDownload,\r\n            collectMusic,\r\n        };\r\n    },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.primaryTheme {\r\n    .dateText {\r\n        color: $primary;\r\n    }\r\n    .playAllBtn {\r\n        background-color: $primary;\r\n    }\r\n    .okBtn {\r\n        background-color: $primary;\r\n    }\r\n}\r\n.darkTheme {\r\n    .dateText {\r\n        color: $dark;\r\n    }\r\n    .playAllBtn {\r\n        background-color: $dark;\r\n    }\r\n    .okBtn {\r\n        background-color: $dark;\r\n    }\r\n}\r\n.freeTheme {\r\n    .dateText {\r\n        color: $free;\r\n    }\r\n    .playAllBtn {\r\n        background-color: $free;\r\n    }\r\n    .okBtn {\r\n        background-color: $free;\r\n    }\r\n}\r\n.dailyRec {\r\n    .calendarBox {\r\n        width: 90px;\r\n        height: 90px;\r\n        box-sizing: border-box;\r\n        .dateText {\r\n            top: 60%;\r\n        }\r\n    }\r\n    .hover-btn {\r\n        &:hover {\r\n            background-color: rgba($color: #000000, $alpha: 0.1) !important;\r\n        }\r\n    }\r\n    .playAllBtn {\r\n        width: 160px;\r\n        height: 36px;\r\n        svg:first-of-type {\r\n            transform: rotate(-90deg);\r\n        }\r\n        > div:nth-child(1) {\r\n            flex-grow: 3;\r\n        }\r\n    }\r\n    .collectList {\r\n        height: 36px;\r\n    }\r\n    .headRow {\r\n        .songCol {\r\n            text-align: center;\r\n        }\r\n    }\r\n    .songRow {\r\n        .songCol {\r\n            box-sizing: border-box;\r\n            @extend .text-ellipsis;\r\n            .hover-icon {\r\n                @extend .cursor-pointer;\r\n                opacity: 0.5;\r\n                &:hover {\r\n                    opacity: 1;\r\n                }\r\n            }\r\n        }\r\n        &:hover {\r\n            background-color: rgb(235, 235, 235) !important;\r\n        }\r\n    }\r\n    .songRow:nth-child(odd) {\r\n        background-color: #f1f1f1;\r\n    }\r\n    .songRow:nth-child(even) {\r\n        background-color: #fff;\r\n    }\r\n    .songRow:nth-child(1) {\r\n        background-color: #fff;\r\n    }\r\n}\r\n.okBtn {\r\n    width: 106px;\r\n    height: 38px;\r\n    border-radius: 20px;\r\n    color: #fff;\r\n    &:hover {\r\n        filter: invert(0.08);\r\n    }\r\n}\r\n.cancelBtn {\r\n    background-color: #fff !important;\r\n}\r\n</style>\r\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export const downloadMusic = (url: string, name: string | number = Date.now()) => {\r\n    console.log(name);\r\n    let tagA: any = document.createElement(\"a\");\r\n    tagA.download = String(name);\r\n    tagA.href = url;\r\n    tagA.click();\r\n};","\r\nimport { computed, defineComponent, reactive, ref, toRefs, watch } from \"vue\";\r\nimport { getRecommendSongsApi, getSongDetail, getSongUrl, likeMusic } from \"@/api/discover\";\r\nimport { getLikeList as getLikeListApi } from \"@/api/login\";\r\nimport { playTime } from \"@/hooks/useFilters\";\r\nimport { useStore } from \"vuex\";\r\nimport { downloadMusic as downloadMusicFun } from \"@/utils/file\";\r\nimport { musicQuality } from \"@/hooks/useFilters\";\r\nimport { AxiosResponseProps } from \"@/utils/request\";\r\nexport default defineComponent({\r\n    setup() {\r\n        const store = useStore();\r\n        const state = reactive({\r\n            dailySongs: [],\r\n            downloadModalVisible: false,\r\n            songsUrlObjArr: [],\r\n            currentMusicObj: {},\r\n            likeList: [],\r\n            commonToast: ref(null),\r\n            colVisible: false,\r\n        });\r\n        watch(\r\n            () => state.songsUrlObjArr,\r\n            newV => {\r\n                console.log(newV);\r\n            }\r\n        );\r\n        const getRec = () => {\r\n            return new Promise((resolve, reject) => {\r\n                getRecommendSongsApi({ t: Date.now() }).then((res: AxiosResponseProps) => {\r\n                    if (res.code === 200) {\r\n                        state.dailySongs = res.data.dailySongs;\r\n                        resolve(res);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        getRec();\r\n        const getLikeList: () => Promise<AxiosResponseProps> = () => {\r\n            return new Promise((resolve, reject) => {\r\n                getLikeListApi().then((res: any) => {\r\n                    if (res.code === 200) {\r\n                        state.likeList = res.ids;\r\n                        resolve(res);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        getLikeList();\r\n        const calendarColor = computed(() =>\r\n            store.getters.getTheme === \"primaryTheme\" ? \"#ec4141\" : store.getters.getTheme === \"darkTheme\" ? \"#212529\" : \"#50c475\"\r\n        );\r\n        const tryDownloadMusic = item => {\r\n            state.currentMusicObj = item;\r\n            getSongUrl(item.id).then((res: AxiosResponseProps) => {\r\n                if (res.code === 200) {\r\n                    if (res.data.length === 1) {\r\n                        state.songsUrlObjArr = res.data.map(item => ({ ...item, checked: true }));\r\n                    } else {\r\n                        state.songsUrlObjArr = res.data.map(item => ({ ...item, checked: false }));\r\n                    }\r\n                    state.downloadModalVisible = true;\r\n                }\r\n            });\r\n        };\r\n        const confirmDownload = () => {\r\n            console.log(state.songsUrlObjArr);\r\n            let findResult = state.songsUrlObjArr.find(item => item.checked);\r\n            if (findResult) {\r\n                downloadMusicFun(findResult.url, (state.currentMusicObj as { name: string }).name);\r\n            }\r\n        };\r\n        const collectMusic = (item, like) => {\r\n            likeMusic({ id: item.id, like }).then((res: any) => {\r\n                if (res.code === 200) {\r\n                    Promise.all([getRec(), getLikeList()]).then(([res1, res2]: [AxiosResponseProps, AxiosResponseProps]) => {\r\n                        if (res1.code === 200 && res2.code === 200) {\r\n                            state.commonToast.success(like ? \"已添加到我喜欢的音乐\" : \"取消喜欢成功\");\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        return {\r\n            ...toRefs(state),\r\n            playTime,\r\n            calendarColor,\r\n            window,\r\n            tryDownloadMusic,\r\n            musicQuality,\r\n            confirmDownload,\r\n            collectMusic,\r\n        };\r\n    },\r\n});\r\n","import { render } from \"./dailyRec.vue?vue&type=template&id=1c5cbfb4&scoped=true\"\nimport script from \"./dailyRec.vue?vue&type=script&lang=ts\"\nexport * from \"./dailyRec.vue?vue&type=script&lang=ts\"\n\nimport \"./dailyRec.vue?vue&type=style&index=0&id=1c5cbfb4&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-1c5cbfb4\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n"],"sourceRoot":""}