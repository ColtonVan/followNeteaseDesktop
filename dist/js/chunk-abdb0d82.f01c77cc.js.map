{"version":3,"sources":["webpack:///./src/views/dailyRec.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/utils/file.ts","webpack:///./src/views/dailyRec.vue?b01e","webpack:///./src/views/dailyRec.vue?0700","webpack:///./src/views/dailyRec.vue?7965"],"names":["class","width","height","color","calendarColor","window","Date","getDate","colVisible","columns","dataSource","dailySongs","visible","downloadModalVisible","default","songsUrlObjArr","item","index","key","type","name","level","id","checked","for","musicQuality","buttons","confirmDownload","ref","tracks","map","defaultListName","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","downloadMusic","url","now","console","log","tagA","document","createElement","download","String","href","click","setup","store","state","currentMusicObj","likeList","commonToast","title","dataIndex","render","text","join","getFullYear","getMonth","padStart","newV","getRec","Promise","resolve","reject","t","then","res","code","data","getLikeList","ids","getters","getTheme","tryDownloadMusic","findResult","find","collectMusic","like","all","res1","res2","success","playTime","__scopeId"],"mappings":"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","file":"js/chunk-abdb0d82.f01c77cc.js","sourcesContent":["<template>\r\n    <div class=\"dailyRec ps-3 h-100 overflow-scroll hideScrollBar\">\r\n        <div class=\"m-5 d-flex\">\r\n            <div class=\"position-relative calendarBox\">\r\n                <CalendarIcon width=\"90\" height=\"90\" :color=\"calendarColor\" />\r\n                <div class=\"dateText fw-bold position-absolute start-50 fs-1 translate-middle\">\r\n                    {{ new window.Date().getDate() }}\r\n                </div>\r\n            </div>\r\n            <div class=\"ms-5 d-flex flex-column justify-content-center\">\r\n                <div class=\"fs-1\">每日歌曲推荐</div>\r\n                <div class=\"text-muted\">根据你的音乐口味生成，每天6:00更新</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"d-flex\">\r\n            <div\r\n                class=\"rounded-pill d-flex align-items-center justify-content-between text-white mb-4 ms-5 cursor-pointer position-relative overflow-hidden playAllBtn\"\r\n            >\r\n                <div class=\"d-flex align-items-center justify-content-center border-end h-100 hover-btn\">\r\n                    <DownArrowIcon width=\"20\" height=\"20\" />\r\n                    <span class=\"ms-1\">播放全部</span>\r\n                </div>\r\n                <div class=\"d-flex align-items-center justify-content-center flex-grow-1 h-100 hover-btn\">\r\n                    <PlusIcon width=\"20\" height=\"20\" />\r\n                </div>\r\n            </div>\r\n            <div @click=\"colVisible = true\" class=\"collectList ms-3 rounded-pill px-5 border d-flex align-items-center cursor-pointer hover-btn\">\r\n                <CollectListIcon width=\"20\" height=\"20\" />\r\n                <span class=\"ms-2\">收藏全部</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"border-top mb-5\">\r\n            <MusicList :columns=\"columns\" :dataSource=\"dailySongs\" />\r\n        </div>\r\n    </div>\r\n    <CommonModal v-model:visible=\"downloadModalVisible\">\r\n        <template #default>\r\n            <div class=\"d-flex justify-content-center\">\r\n                <div v-for=\"(item, index) in songsUrlObjArr\" :key=\"index\" class=\"d-flex align-items-center cursor-pointer\">\r\n                    <input type=\"radio\" :name=\"item.level\" :id=\"item.level\" v-model=\"item.checked\" :checked=\"item.checked\" />\r\n                    <label class=\"ms-3\" :for=\"item.level\">{{ musicQuality(item.level) }}</label>\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template #buttons>\r\n            <div class=\"d-flex justify-content-center\">\r\n                <div @click=\"confirmDownload\" class=\"okBtn cursor-pointer d-flex justify-content-center align-items-center\">\r\n                    确定\r\n                </div>\r\n                <div\r\n                    @click=\"downloadModalVisible = false\"\r\n                    class=\"okBtn cancelBtn ms-4 rounded-pill text-muted border cursor-pointer d-flex justify-content-center align-items-center\"\r\n                >\r\n                    取消\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </CommonModal>\r\n    <CommonToast ref=\"commonToast\" />\r\n    <CollectionListModal :tracks=\"dailySongs.map(item => item.id)\" v-model:visible=\"colVisible\" :defaultListName=\"defaultListName\"/>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent, reactive, ref, toRefs, watch } from \"vue\";\r\nimport { getRecommendSongsApi, getSongDetail, getSongUrl, likeMusic } from \"@/api/discover\";\r\nimport { getLikeList as getLikeListApi } from \"@/api/login\";\r\nimport { playTime, addHaveUrl } from \"@/hooks/useFilters\";\r\nimport { useStore } from \"vuex\";\r\nimport { downloadMusic as downloadMusicFun } from \"@/utils/file\";\r\nimport { musicQuality } from \"@/hooks/useFilters\";\r\nimport { AxiosResponseProps } from \"@/utils/request\";\r\nexport default defineComponent({\r\n    setup() {\r\n        const store = useStore();\r\n        const state = reactive({\r\n            dailySongs: [],\r\n            downloadModalVisible: false,\r\n            songsUrlObjArr: [],\r\n            currentMusicObj: {},\r\n            likeList: [],\r\n            commonToast: ref(null),\r\n            colVisible: false,\r\n            columns: [\r\n                {\r\n                    title: \"音乐标题\",\r\n                    dataIndex: \"name\",\r\n                },\r\n                {\r\n                    title: \"歌手\",\r\n                    dataIndex: \"ar\",\r\n                    render: text => {\r\n                        return text.map(item => item.name).join(\"、\");\r\n                    },\r\n                },\r\n                {\r\n                    title: \"专辑\",\r\n                    dataIndex: \"al\",\r\n                    render: text => {\r\n                        return text.name;\r\n                    },\r\n                },\r\n                {\r\n                    title: \"时长\",\r\n                    dataIndex: \"dt\",\r\n                    render: text => {\r\n                        return playTime(text);\r\n                    },\r\n                },\r\n            ],\r\n            defaultListName: `每日歌曲推荐(${new Date().getFullYear()}.${String(new Date().getMonth() + 1).padStart(2, \"0\")}.${String(\r\n                new Date().getDate()\r\n            ).padStart(2, \"0\")})`,\r\n        });\r\n        watch(\r\n            () => state.songsUrlObjArr,\r\n            newV => {\r\n                console.log(newV);\r\n            }\r\n        );\r\n        const getRec = () => {\r\n            return new Promise((resolve, reject) => {\r\n                getRecommendSongsApi({ t: Date.now() }).then(async (res: AxiosResponseProps) => {\r\n                    if (res.code === 200) {\r\n                        state.dailySongs = await addHaveUrl(res.data.dailySongs);\r\n                        resolve(res);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        getRec();\r\n        const getLikeList: () => Promise<AxiosResponseProps> = () => {\r\n            return new Promise((resolve, reject) => {\r\n                getLikeListApi().then((res: any) => {\r\n                    if (res.code === 200) {\r\n                        state.likeList = res.ids;\r\n                        resolve(res);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        getLikeList();\r\n        const calendarColor = computed(() =>\r\n            store.getters.getTheme === \"primaryTheme\" ? \"#ec4141\" : store.getters.getTheme === \"darkTheme\" ? \"#212529\" : \"#50c475\"\r\n        );\r\n        const tryDownloadMusic = item => {\r\n            state.currentMusicObj = item;\r\n            getSongUrl(item.id).then((res: AxiosResponseProps) => {\r\n                if (res.code === 200) {\r\n                    if (res.data.length === 1) {\r\n                        state.songsUrlObjArr = res.data.map(item => ({ ...item, checked: true }));\r\n                    } else {\r\n                        state.songsUrlObjArr = res.data.map(item => ({ ...item, checked: false }));\r\n                    }\r\n                    state.downloadModalVisible = true;\r\n                }\r\n            });\r\n        };\r\n        const confirmDownload = () => {\r\n            console.log(state.songsUrlObjArr);\r\n            let findResult = state.songsUrlObjArr.find(item => item.checked);\r\n            if (findResult) {\r\n                downloadMusicFun(findResult.url, (state.currentMusicObj as { name: string }).name);\r\n            }\r\n        };\r\n        const collectMusic = (item, like) => {\r\n            likeMusic({ id: item.id, like }).then((res: any) => {\r\n                if (res.code === 200) {\r\n                    Promise.all([getRec(), getLikeList()]).then(([res1, res2]: [AxiosResponseProps, AxiosResponseProps]) => {\r\n                        if (res1.code === 200 && res2.code === 200) {\r\n                            state.commonToast.success(like ? \"已添加到我喜欢的音乐\" : \"取消喜欢成功\");\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        return {\r\n            ...toRefs(state),\r\n            playTime,\r\n            calendarColor,\r\n            window,\r\n            tryDownloadMusic,\r\n            musicQuality,\r\n            confirmDownload,\r\n            collectMusic,\r\n        };\r\n    },\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.primaryTheme {\r\n    .dateText {\r\n        color: $primary;\r\n    }\r\n    .playAllBtn {\r\n        background-color: $primary;\r\n    }\r\n    .okBtn {\r\n        background-color: $primary;\r\n    }\r\n}\r\n.darkTheme {\r\n    .dateText {\r\n        color: $dark;\r\n    }\r\n    .playAllBtn {\r\n        background-color: $dark;\r\n    }\r\n    .okBtn {\r\n        background-color: $dark;\r\n    }\r\n}\r\n.freeTheme {\r\n    .dateText {\r\n        color: $free;\r\n    }\r\n    .playAllBtn {\r\n        background-color: $free;\r\n    }\r\n    .okBtn {\r\n        background-color: $free;\r\n    }\r\n}\r\n.dailyRec {\r\n    .calendarBox {\r\n        width: 90px;\r\n        height: 90px;\r\n        box-sizing: border-box;\r\n        .dateText {\r\n            top: 60%;\r\n        }\r\n    }\r\n    .hover-btn {\r\n        &:hover {\r\n            background-color: rgba($color: #000000, $alpha: 0.1) !important;\r\n        }\r\n    }\r\n    .playAllBtn {\r\n        width: 160px;\r\n        height: 36px;\r\n        svg:first-of-type {\r\n            transform: rotate(-90deg);\r\n        }\r\n        > div:nth-child(1) {\r\n            flex-grow: 3;\r\n        }\r\n    }\r\n    .collectList {\r\n        height: 36px;\r\n    }\r\n}\r\n.okBtn {\r\n    width: 106px;\r\n    height: 38px;\r\n    border-radius: 20px;\r\n    color: #fff;\r\n    &:hover {\r\n        filter: invert(0.08);\r\n    }\r\n}\r\n.cancelBtn {\r\n    background-color: #fff !important;\r\n}\r\n</style>\r\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export const downloadMusic = (url: string, name: string | number = Date.now()) => {\r\n    console.log(name);\r\n    let tagA: any = document.createElement(\"a\");\r\n    tagA.download = String(name);\r\n    tagA.href = url;\r\n    tagA.click();\r\n};","\r\nimport { computed, defineComponent, reactive, ref, toRefs, watch } from \"vue\";\r\nimport { getRecommendSongsApi, getSongDetail, getSongUrl, likeMusic } from \"@/api/discover\";\r\nimport { getLikeList as getLikeListApi } from \"@/api/login\";\r\nimport { playTime, addHaveUrl } from \"@/hooks/useFilters\";\r\nimport { useStore } from \"vuex\";\r\nimport { downloadMusic as downloadMusicFun } from \"@/utils/file\";\r\nimport { musicQuality } from \"@/hooks/useFilters\";\r\nimport { AxiosResponseProps } from \"@/utils/request\";\r\nexport default defineComponent({\r\n    setup() {\r\n        const store = useStore();\r\n        const state = reactive({\r\n            dailySongs: [],\r\n            downloadModalVisible: false,\r\n            songsUrlObjArr: [],\r\n            currentMusicObj: {},\r\n            likeList: [],\r\n            commonToast: ref(null),\r\n            colVisible: false,\r\n            columns: [\r\n                {\r\n                    title: \"音乐标题\",\r\n                    dataIndex: \"name\",\r\n                },\r\n                {\r\n                    title: \"歌手\",\r\n                    dataIndex: \"ar\",\r\n                    render: text => {\r\n                        return text.map(item => item.name).join(\"、\");\r\n                    },\r\n                },\r\n                {\r\n                    title: \"专辑\",\r\n                    dataIndex: \"al\",\r\n                    render: text => {\r\n                        return text.name;\r\n                    },\r\n                },\r\n                {\r\n                    title: \"时长\",\r\n                    dataIndex: \"dt\",\r\n                    render: text => {\r\n                        return playTime(text);\r\n                    },\r\n                },\r\n            ],\r\n            defaultListName: `每日歌曲推荐(${new Date().getFullYear()}.${String(new Date().getMonth() + 1).padStart(2, \"0\")}.${String(\r\n                new Date().getDate()\r\n            ).padStart(2, \"0\")})`,\r\n        });\r\n        watch(\r\n            () => state.songsUrlObjArr,\r\n            newV => {\r\n                console.log(newV);\r\n            }\r\n        );\r\n        const getRec = () => {\r\n            return new Promise((resolve, reject) => {\r\n                getRecommendSongsApi({ t: Date.now() }).then(async (res: AxiosResponseProps) => {\r\n                    if (res.code === 200) {\r\n                        state.dailySongs = await addHaveUrl(res.data.dailySongs);\r\n                        resolve(res);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        getRec();\r\n        const getLikeList: () => Promise<AxiosResponseProps> = () => {\r\n            return new Promise((resolve, reject) => {\r\n                getLikeListApi().then((res: any) => {\r\n                    if (res.code === 200) {\r\n                        state.likeList = res.ids;\r\n                        resolve(res);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        getLikeList();\r\n        const calendarColor = computed(() =>\r\n            store.getters.getTheme === \"primaryTheme\" ? \"#ec4141\" : store.getters.getTheme === \"darkTheme\" ? \"#212529\" : \"#50c475\"\r\n        );\r\n        const tryDownloadMusic = item => {\r\n            state.currentMusicObj = item;\r\n            getSongUrl(item.id).then((res: AxiosResponseProps) => {\r\n                if (res.code === 200) {\r\n                    if (res.data.length === 1) {\r\n                        state.songsUrlObjArr = res.data.map(item => ({ ...item, checked: true }));\r\n                    } else {\r\n                        state.songsUrlObjArr = res.data.map(item => ({ ...item, checked: false }));\r\n                    }\r\n                    state.downloadModalVisible = true;\r\n                }\r\n            });\r\n        };\r\n        const confirmDownload = () => {\r\n            console.log(state.songsUrlObjArr);\r\n            let findResult = state.songsUrlObjArr.find(item => item.checked);\r\n            if (findResult) {\r\n                downloadMusicFun(findResult.url, (state.currentMusicObj as { name: string }).name);\r\n            }\r\n        };\r\n        const collectMusic = (item, like) => {\r\n            likeMusic({ id: item.id, like }).then((res: any) => {\r\n                if (res.code === 200) {\r\n                    Promise.all([getRec(), getLikeList()]).then(([res1, res2]: [AxiosResponseProps, AxiosResponseProps]) => {\r\n                        if (res1.code === 200 && res2.code === 200) {\r\n                            state.commonToast.success(like ? \"已添加到我喜欢的音乐\" : \"取消喜欢成功\");\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        return {\r\n            ...toRefs(state),\r\n            playTime,\r\n            calendarColor,\r\n            window,\r\n            tryDownloadMusic,\r\n            musicQuality,\r\n            confirmDownload,\r\n            collectMusic,\r\n        };\r\n    },\r\n});\r\n","import { render } from \"./dailyRec.vue?vue&type=template&id=4bfa2c96&scoped=true\"\nimport script from \"./dailyRec.vue?vue&type=script&lang=ts\"\nexport * from \"./dailyRec.vue?vue&type=script&lang=ts\"\n\nimport \"./dailyRec.vue?vue&type=style&index=0&id=4bfa2c96&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4bfa2c96\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./dailyRec.vue?vue&type=style&index=0&id=4bfa2c96&scoped=true&lang=scss\""],"sourceRoot":""}