(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f8267ae"],{"17b3":function(e,t,n){"use strict";n.r(t);n("caad"),n("2532"),n("d81d"),n("b0c0");var c=n("7a23"),i=Object(c["R"])("data-v-6925c038");Object(c["w"])("data-v-6925c038");var o={class:"row h-100 flex-center"},r={class:"h-100 layoutWidth overflow-scroll hideScrollBar d-flex justify-content-between"},a={class:"leftArea pe-5"},l=Object(c["i"])("span",{class:"ms-3 fs-4"},"视频详情",-1),s={class:"mt-3 d-flex align-items-center justify-content-between"},d={class:"d-flex align-items-center"},u={class:"text-muted canSelect"},b={class:"fs-4 fw-bold mt-4"},f={class:"mt-3 text-muted opacity-50"},p={class:"me-5"},j={key:0},v={class:"d-flex mt-4 flex-wrap"},O={class:"mt-6 d-flex justify-content-start mt-4"},m={class:"px-4 py-2 border border-1 rounded-pill cursor-pointer opBtn flex-center"},x={class:"rightArea flex-grow-1 flex-shrink-0"},h=Object(c["i"])("div",{class:"fs-4 py-3"},"相关推荐",-1),w={class:"position-absolute top-0 end-0 pe-1 pt-1 d-flex align-items-center"},y={class:"ms-1"},k={class:"position-absolute bottom-0 end-0 pe-1 pb-1"},g={class:"ms-3 recVideoInfo d-flex flex-column justify-content-center"},C={class:"mb-2 fs-5"},D={class:"text-muted opacity-75 text-ellipsis"},V=Object(c["i"])("div",{class:"text-center fs-5"},"确定不再收藏该视频？",-1);Object(c["u"])();var I=i((function(e,t,n,I,M,B){var E,T,U,R,L=Object(c["B"])("arrow-left-icon"),Y=Object(c["B"])("PraiseIcon"),F=Object(c["B"])("CollectBoxIcon"),P=Object(c["B"])("ShareIcon"),S=Object(c["B"])("hollow-play-icon"),z=Object(c["B"])("CommonModal"),A=Object(c["B"])("CommonToast");return Object(c["t"])(),Object(c["f"])(c["a"],null,[Object(c["i"])("div",o,[Object(c["i"])("div",r,[Object(c["i"])("div",a,[Object(c["i"])("div",{class:"d-flex align-items-center py-3 cursor-pointer",onClick:t[1]||(t[1]=function(t){return e.$router.back()})},[Object(c["i"])(L,{color:"#000000",width:"18px",height:"18px"}),l]),Object(c["i"])("video",{controls:"",poster:e.videoDetail.coverUrl,src:e.videoUrls&&e.videoUrls.length?e.videoUrls[0].url:""},null,8,["poster","src"]),Object(c["i"])("div",s,[Object(c["i"])("div",d,[Object(c["i"])("div",{style:{backgroundImage:'url("'.concat(e.videoDetail.avatarUrl,'")')},class:"videoAvatar rounded-pill me-3"},null,4),Object(c["i"])("div",u,Object(c["E"])(null===(E=e.videoDetail)||void 0===E||null===(T=E.creator)||void 0===T?void 0:T.nickname),1)]),e.userFollows.map((function(e){return e.userId})).includes(null===(U=e.videoDetail)||void 0===U||null===(R=U.creator)||void 0===R?void 0:R.userId)?(Object(c["t"])(),Object(c["f"])("div",{key:0,class:"haveFocus text-muted cursor-pointer text-dark px-4 py-2 rounded-pill flex-center",onClick:t[2]||(t[2]=function(t){return e.followUser(!1)})}," √已关注 ")):(Object(c["t"])(),Object(c["f"])("div",{key:1,class:"focus cursor-pointer text-dark px-4 py-2 rounded-pill flex-center",onClick:t[3]||(t[3]=function(t){return e.followUser(!0)})}," + 关注 "))]),Object(c["i"])("div",b,Object(c["E"])(e.videoDetail.title),1),Object(c["i"])("div",f,[Object(c["i"])("span",p,"发布："+Object(c["E"])(e.YYYYMMDD(e.videoDetail.publishTime)),1),e.videoDetail.playCount?(Object(c["t"])(),Object(c["f"])("span",j,"播放："+Object(c["E"])(e.playCount(e.videoDetail.playCount))+"次",1)):Object(c["g"])("",!0)]),Object(c["i"])("div",v,[(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(e.videoDetail.videoGroup,(function(e){return Object(c["t"])(),Object(c["f"])("div",{class:"groupTag rounded-pill px-3",key:e.id},Object(c["E"])(e.name),1)})),128))]),Object(c["i"])("div",O,[e.videoDetailInfo.liked?(Object(c["t"])(),Object(c["f"])("div",{key:0,onClick:t[4]||(t[4]=function(t){return e.likeMV(!1)}),class:"px-4 py-2 border border-1 rounded-pill cursor-pointer opBtn flex-center"},[Object(c["i"])(Y,{width:"14px",height:"14px",class:"me-2 translate-y--10",color:"red"}),Object(c["h"])("已赞("+Object(c["E"])(e.playCount(e.videoDetail.praisedCount))+") ",1)])):(Object(c["t"])(),Object(c["f"])("div",{key:1,onClick:t[5]||(t[5]=function(t){return e.likeMV(!0)}),class:"px-4 py-2 border border-1 rounded-pill cursor-pointer opBtn flex-center"},[Object(c["i"])(Y,{width:"14px",height:"14px",class:"me-2 translate-y--10"}),Object(c["h"])("赞("+Object(c["E"])(e.playCount(e.videoDetail.praisedCount))+") ",1)])),e.collectedMVList.map((function(e){return e.vid})).includes(e.videoDetail.vid)?(Object(c["t"])(),Object(c["f"])("div",{key:2,onClick:t[6]||(t[6]=function(t){return e.collectMV(!1)}),class:"px-4 py-2 border border-1 rounded-pill cursor-pointer opBtn flex-center"},[Object(c["i"])(F,{color:"red",width:"16px",height:"16px",class:"me-2"}),Object(c["h"])("已收藏("+Object(c["E"])(e.playCount(e.videoDetail.subscribeCount))+") ",1)])):(Object(c["t"])(),Object(c["f"])("div",{key:3,onClick:t[7]||(t[7]=function(t){return e.collectMV(!0)}),class:"px-4 py-2 border border-1 rounded-pill cursor-pointer opBtn flex-center"},[Object(c["i"])(F,{width:"16px",height:"16px",class:"me-2"}),Object(c["h"])("收藏("+Object(c["E"])(e.playCount(e.videoDetail.subscribeCount))+") ",1)])),Object(c["i"])("div",m,[Object(c["i"])(P,{width:"16px",height:"16px",class:"me-2"}),Object(c["h"])("分享("+Object(c["E"])(e.playCount(e.videoDetail.shareCount))+") ",1)])])]),Object(c["i"])("div",x,[h,(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(e.recommendVideoList,(function(t,n){var i,o;return Object(c["t"])(),Object(c["f"])("div",{key:n,class:"overflow-hidden rounded-3 mb-3 d-flex cursor-pointer"},[Object(c["i"])("div",{class:"recVideoCover bg-base text-white position-relative overflow-hidden rounded-3",style:{backgroundImage:"url(".concat(t.data.coverUrl,")")}},[Object(c["i"])("div",w,[Object(c["i"])(S,{width:"11px",height:"11px",class:"translate-y--20"}),Object(c["i"])("span",y,Object(c["E"])(e.playCount(t.data.praisedCount)),1)]),Object(c["i"])("div",k,Object(c["E"])(e.playTime(t.data.playTime)),1)],4),Object(c["i"])("div",g,[Object(c["i"])("div",C,Object(c["E"])(t.data.title),1),Object(c["i"])("div",D,"by "+Object(c["E"])(null===(i=t.data)||void 0===i||null===(o=i.creator)||void 0===o?void 0:o.nickname),1)])])})),128))])]),Object(c["i"])(z,{visible:e.modalVisible,"onUpdate:visible":t[8]||(t[8]=function(t){return e.modalVisible=t}),onConfirm:e.okCollection},{default:i((function(){return[V]})),_:1},8,["visible","onConfirm"])]),Object(c["i"])(A,{ref:"commonToast"},null,512)],64)})),M=n("5530"),B=n("1da1"),E=(n("96cf"),n("d3b7"),n("6c02")),T=n("c5e7"),U=n("17b9"),R=n("f727"),L=n("87db"),Y=Object(c["j"])({setup:function(){var e=Object(E["c"])(),t=Object(c["x"])({videoId:e.query.videoId,videoDetail:{},videoUrls:[],commonToast:null,userFollows:[],likedMVList:[],modalVisible:!1,collectedMVList:[],videoDetailInfo:{},recommendVideoList:[]}),n=function(){return new Promise((function(e,n){Object(T["h"])({id:t.videoId}).then(function(){var n=Object(B["a"])(regeneratorRuntime.mark((function n(c){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(200!==c.code){n.next=5;break}return t.videoDetail=c.data,n.next=4,b(c.data.vid);case 4:e(null);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}))};n();var i=function(){Object(T["j"])({id:t.videoId}).then((function(e){200===e.code&&(t.videoUrls=e.urls)}))};i();var o=function(){return new Promise((function(e,n){Object(U["h"])().then((function(n){200===n.code&&(t.userFollows=n.follow,e(null))}))}))};o();var r=function(e){Object(R["a"])({t:e?1:0,id:t.videoDetail.creator.userId}).then(function(){var n=Object(B["a"])(regeneratorRuntime.mark((function n(c){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(200!==c.code){n.next=4;break}return n.next=3,o();case 3:t.commonToast.success(e?"已关注":"已取消关注");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},a=function(){return new Promise((function(e,n){Object(T["f"])().then((function(n){200===n.code&&(t.likedMVList=n.data.feeds,e(null))}))}))};a();var l=function(e){Object(T["k"])({id:t.videoDetail.vid,t:e?1:0}).then(function(){var c=Object(B["a"])(regeneratorRuntime.mark((function c(i){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(200!==i.code){c.next=8;break}return c.next=3,a();case 3:return c.next=5,n();case 5:t.commonToast.success(e?"已赞":"已取消赞"),c.next=9;break;case 8:t.commonToast.warn(i.msg);case 9:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())},s=function(){Object(T["c"])().then((function(e){200===e.code&&(t.collectedMVList=e.data)}))};s();var d=function(){Object(T["g"])().then((function(e){200===e.code&&(t.recommendVideoList=e.datas)}))};d();var u=function(e){e||(t.modalVisible=!1),Object(T["a"])({t:e?1:0,id:t.videoDetail.vid}).then(function(){var c=Object(B["a"])(regeneratorRuntime.mark((function c(i){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(200!==i.code){c.next=6;break}return c.next=3,s();case 3:return c.next=5,n();case 5:t.commonToast.success(e?"已收藏":"已取消收藏");case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())},b=function(e){return new Promise((function(n,c){Object(T["i"])({vid:e}).then((function(e){200===e.code&&(t.videoDetailInfo=e,n(null))}))}))};return Object(M["a"])(Object(M["a"])({},Object(c["F"])(t)),{},{followUser:r,playCount:L["f"],YYYYMMDD:L["a"],playTime:L["g"],likeMV:l,collectMV:u})}});n("6921");Y.render=I,Y.__scopeId="data-v-6925c038";t["default"]=Y},6921:function(e,t,n){"use strict";n("e674")},e674:function(e,t,n){},f727:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var c=n("5530"),i=n("b32d"),o=function(e){return i["a"].get("/follow",{params:Object(c["a"])(Object(c["a"])({},e),{},{timeStamp:Date.now()})})},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pagesize:20,lasttime:-1};return i["a"].get("/event",{params:Object(c["a"])(Object(c["a"])({},e),{},{timeStamp:Date.now()})})}}}]);
//# sourceMappingURL=chunk-4f8267ae.d818c365.js.map