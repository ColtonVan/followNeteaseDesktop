(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ae99"],{be11:function(t,e,n){"use strict";n.r(e);var c=n("5530"),a=(n("d81d"),n("b0c0"),n("4d90"),n("caad"),n("2532"),n("7a23")),r={class:"text-muted me-3"},i={class:"me-3"};function o(t,e,n,o,u,s){var d,l=Object(a["B"])("HorizontalNav"),b=Object(a["B"])("LikedIcon"),f=Object(a["B"])("HaveLikedIcon"),j=Object(a["B"])("DownloadMusicIcon"),O=Object(a["B"])("musicList"),p=Object(a["B"])("CommonToast");return Object(a["t"])(),Object(a["f"])(a["a"],null,[Object(a["i"])(l,{navs:t.navs},null,8,["navs"]),Object(a["i"])(O,{columns:t.columns,dataSource:null===(d=t.dataSource)||void 0===d?void 0:d.map((function(t,e){return Object(c["a"])(Object(c["a"])({},t),{},{index:e})})),emptyText:"暂无搜索结果，搜搜其他关键词吧~"},{toolBar:Object(a["N"])((function(e){var n=e.id,c=e.index,o=e.name;return[Object(a["i"])("span",r,Object(a["E"])(String(c+1).padStart(2,"0")),1),Object(a["i"])("span",i,[t.likedMusicList.includes(n)?(Object(a["t"])(),Object(a["f"])(f,{key:1,class:"cursor-pointer",onClick:function(e){return t.collectMusic(!1,n)},width:"15",height:"15"},null,8,["onClick"])):(Object(a["t"])(),Object(a["f"])(b,{key:0,class:"cursor-pointer",onClick:function(e){return t.collectMusic(!0,n)},width:"15",height:"15"},null,8,["onClick"]))]),Object(a["i"])(j,{onClick:function(e){return t.handleDownloadMusic({id:n,name:o})},class:"cursor-pointer",width:"15",height:"15"},null,8,["onClick"])]})),_:1},8,["columns","dataSource"]),Object(a["i"])(p,{ref:"toastRef"},null,512)],64)}var u=n("1da1"),s=(n("96cf"),n("a15b"),n("b137")),d=n("6c02"),l=n("5502"),b=n("c926"),f=n("87db"),j=n("54ba"),O=n("3c08"),p=n("6e21"),m=Object(a["j"])({components:{MusicList:b["default"]},setup:function(){var t=Object(d["c"])(),e=Object(l["b"])(),n=Object(a["x"])({navs:[{title:"单曲",active:!0}],keywords:Object(a["d"])((function(){return t.query.keyword})),songs:[],columns:[{title:"",span:1,dataIndex:"toolBar",slots:{customRender:"toolBar"}},{title:"音乐标题",dataIndex:"name",span:3,slots:{customRender:"name"}},{title:"歌手",dataIndex:"ar",span:3,render:function(t){return t.map((function(t){return t.name})).join("、")}},{title:"专辑",dataIndex:"al",span:2,render:function(t){return t.name}},{title:"时长",dataIndex:"dt",span:1,render:function(t){return Object(f["f"])(t)}}],dataSource:[],likedMusicList:Object(a["d"])((function(){return e.state.likedMusicList})),toastRef:Object(a["y"])(null)});Object(a["L"])((function(){return n.keywords}),(function(t){t&&Object(s["a"])({keywords:t,type:1}).then(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200!==e.code){t.next=4;break}return t.next=3,Object(f["b"])(e.result.songs||[]);case 3:n.dataSource=t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),{immediate:!0});var r=function(t,c){Object(j["g"])({id:c,like:t}).then(function(){var c=Object(u["a"])(regeneratorRuntime.mark((function c(a){return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(200!==a.code){c.next=6;break}return c.next=3,e.dispatch("getLikedMusicList");case 3:n.toastRef.success(t?"已添加到我喜欢的音乐":"取消喜欢成功"),c.next=7;break;case 6:n.toastRef.error(t?"添加失败":"取消喜欢失败");case 7:case"end":return c.stop()}}),c)})));return function(t){return c.apply(this,arguments)}}()).catch((function(t){n.toastRef.error("请求失败")}))},i=function(t){var e=t.id,c=t.name;Object(p["c"])({id:e}).then((function(t){if(200===t.code){var e=t.data;e&&e.length?Object(O["a"])(e[0].url,c).then((function(){n.toastRef.success("已添加至下载")})).catch((function(){n.toastRef.warn("下载失败")})):n.toastRef.warn("获取音乐链接失败")}}))};return Object(c["a"])(Object(c["a"])({},Object(a["F"])(n)),{},{collectMusic:r,handleDownloadMusic:i})}});m.render=o;e["default"]=m}}]);
//# sourceMappingURL=chunk-2d21ae99.57deef01.js.map